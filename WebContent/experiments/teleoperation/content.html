		<div id="main_image">
			<div id="main_image_container" style="margin-left:0px">
				<img id="image_0" class="main_img" src="experiments/teleoperation/images/nebulosa_tarantula.jpeg"/>	
			</div> 
		</div>
<div id="container" ng-controller="InitDevices" style="background-image: url(images/Template.png);background-size:940px 744px;background-repeat:no-repeat">
	<div id="focus_marker">
		<div id="focus_marker_info">0</div>
	</div>
	<div id="left_controls">
		<div id="surveillance_panel" ng-controller="GetCamerasCtrl">
			<div style="margin-top:80px;">
				<div style="width:100px;text-align:center;">
					<span id="scam0_name" class="title">SCAM 0</span>
				</div>
				<div class="expand" style="z-index:500;">
					<div class="positioner">
						<a class="slide" aria-haspopup="true">
							<img id="scam0_img" src="experiments/teleoperation/images/white_noise.gif"/>
						</a>
					</div>
				</div>
			</div>
			<div style="margin-top:80px;">
				<div style="width:100px;text-align:center;">
					<span id="scam1_name" class="title">SCAM 1</span>
				</div>
				<div class="expand" style="z-index:409;">
					<div class="positioner">
						<a class="slide" aria-haspopup="true">
							<img id="scam1_img" src="experiments/teleoperation/images/white_noise.gif"/>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="right_controls" ng-controller="MountDevice">
		<div id="mount_target_panel">
			<span class="title">{{'telexp.mount.title' | i18n}}</span>
			<div id="mount_parameters">
				<table style="position:relative;left:12px;border-spacing:5px">
					<tr>
						<td><input id="coords_ra" class="input_text" ng-model="ra" tooltip="{{'telexp.mount.messages.ra_text' | i18n}}" placeholder="{{'telexp.mount.ra' | i18n}}"></input></td>
					</tr>
					<tr>
						<td><input id="coords_dec" class="input_text" ng-model="dec" tooltip="{{'telexp.mount.messages.dec_text' | i18n}}" placeholder="{{'telexp.mount.dec' | i18n}}"></input></td>
					</tr>
					<tr>
						<td><input id="tags" class="input_text" ng-model="target_name" tooltip="{{'telexp.mount.messages.target_text' | i18n}}" placeholder="{{'telexp.mount.object' | i18n}}"></input></td>
					</tr>
				</table>
				<div align="center" class="status">
					<span class="status_text">READY</span>
				</div>
				<div id="mount_buttons_panel" style="float:right;">
					<img src="experiments/teleoperation/images/telescope.png" width="32px" height="32px" ng-click="go()" tooltip="Move telescope"/>
				</div>				
			</div>
		</div>
		<div id="hand_controller_pad" style="position: absolute;top: -40px;left: 55px;" tooltip="{{'telexp.mount.messages.relative_move' | i18n}}">
			<table>
				<tr>
					<td></td>
					<td>
						<div class="arrow_up"></div>
					</td>
					<td></td>
				</tr>
				<tr>
					<td>
						<div class="arrow_left"></div>
					</td>
					<td></td>
					<td>
						<div class="arrow_right"></div>
					</td>						
				</tr>
				<tr>
						<td></td>
						<td>
							<div class="arrow_down"></div>
						</td>
						<td></td>
				</tr>						
			</table>
		</div>
		<div id="main_ccd_panel" ng-controller="CcdDevice" ng-init="ccd_alarm=false">
				<div style="display:block;">
					<span class="title">CCD</span>
					<a id="ccd_alert" href="#" >
					<span id="ccd_budge" style="opacity:0.1" class="badge badge-important" ng-class="'badge_alarm':ccd_alarm"  ng-mouseleave="ccd_alarm=false">0</span>
					</a>
					<div style="float:right;">
					<img src="experiments/teleoperation/images/information.png" />
					</div>
				</div>
				<div id="main_ccd_parameters" ng-model="isExposing" ng-init="isExposing=false">
					
						<table style="position:relative;left:18px;border-spacing:5px">
							<tr>
								<td><input id="exposure_time" class="input_text" ng-model="exposure_time" placeholder="{{'telexp.ccd.exposure_time' | i18n}}"></td>
							</tr>
							<tr>
								<td><select id="filter_selector" class="selector" ng-model="filter" ng-change="setFilter()" tooltip="{{'telexp.ccd.messages.filter_text' | i18n}}">
									<option ng-repeat="filter in filters_0">{{filter}}</option>
								</select></td>
							</tr>
							<tr>
								<td><select id="binning_selector" class="selector" ng-model="binning" ng-init="binning='1x1'" tooltip="{{'telexp.ccd.messages.binning_text' | i18n}}">
									<option>1x1</option>
								</select></td>
							</tr>
						</table>
					
					<div align="center" class="status" ng-model="status_main_ccd" ng-init="status_main_ccd='telexp.ccd.status.ready'">
						<span id="ccd_status" class="status_text" ng-class="{'mess-info':isExposing}">{{status_main_ccd | i18n}}</span>
					</div>
					<div id="main_ccd_buttons_panel" style="float:right;" >
						<img src="experiments/teleoperation/images/eye.png" width="49px" height="34px" ng-click="expose()" tooltip="{{'telexp.ccd.messages.expose_text' | i18n}}"/>
					</div>
				</div>
				 <div id="ccd_button_1" class="ccd_button" style="position:relative;left:175px;width:70px;top:-35px" ng-click="setOrder(1)">
		<img src="experiments/teleoperation/images/ccd.png" width="40px"/>
	</div>
	<div id="ccd_button_0" class="ccd_button_selected" style="position:relative;top:-75px;left:710px;width:70px;" ng-click="setOrder(0)">
		<img src="experiments/teleoperation/images/main_ccd.png" width="54px" />
	</div>
			</div>
			
	</div>
	
	<!-- <div style="width:500px;position:absolute;top:80px;left:270px;"> -->  
		
		

	  <!-- </div>  -->   
	   
	<div id="gloria_info">
		<span class="title_info">GLORIA</span> <span class="regular_info">Info</span>
		<div id="weather_station" ng-controller="WeatherDevice" style="width:400px;margin-top:-5px;margin-left:100px">

			<div style="float:left; display:inline-block;width:33%">
				<table>
					<tr>
						<td style="text-align:center"><img height="24px" width="24px" src="experiments/teleoperation/images/humidity.png"/></td>
					</tr>
					<tr>
						<td><label class="no_alarm" id="humidity">--- % RH</label></td>
					</tr>
				</table>
			</div>
			<div style="float:left; display:inline-block;width:33%">
				<table>
					<tr>
						<td style="text-align:center"><img height="24px" width="24px" src="experiments/teleoperation/images/wind.png"/></td>
					</tr>
					<tr>
						<td><label class="no_alarm" id="velocity">--- m/s</label></td>
					</tr>
				</table>
			</div>
			<div style="float:left; display:inline-block;width:33%">
				<table>
					<tr>
						<td style="text-align:center"><img height="24px" width="24px" src="experiments/teleoperation/images/temperature.png"/></td>
					</tr>
					<tr>
						<td><label class="no_alarm" id="temperature">--- Deg. M</label></td>
					</tr>
				</table>
			</div>
		</div>

	</div>
	 
	<div class="image_carousel" ng-controller="ImageCarousel">
		<div id="foo2">
		</div>
		<div class="clearfix"></div>
		<a class="prev" id="foo1_prev" href="#"><span>prev</span></a>
		<a class="next" id="foo1_next" href="#"><span>next</span></a> 
	</div>

</div>
 

		   
<script>
var dragged = false;
var initFocuserPosition = 0;
var finalFocuserPosition = 1000;
var currentFocuserPosition = 0;

$('#focus_marker').on('mouseenter', function(e){
	$('#focus_marker_info').text(currentFocuserPosition);
	$('#focus_marker_info').css("visibility","visible");
});

$('#focus_marker').on('mouseleave', function(e){
	if (!dragged){
		$('#focus_marker_info').css("visibility","hidden");		
	}
});
$('#focus_marker').on('mousedown', function(e){
	
	var movementDirection = 0;  //Undefined
	var lastRotateDegree = 0;
	var rotateDegree = 0;
	
	var limitClockwiseDirection = false;
	var limitCounterClockwiseDirection = false;


	dragged = true;
	
	$('#focus_marker').css("opacity","0.8");

	e.originalEvent.preventDefault();

    $(window).mousemove(function(event){
        var rotateOriginalDegree = rotateAnnotationCropper($('#main_image').parent(), event.pageX,event.pageY, $('#focus_marker'));
        
        if ((rotateOriginalDegree < 270) && (rotateOriginalDegree > 180)){
        	rotateDegree = rotateOriginalDegree - 360;
        } else {
        	rotateDegree = rotateOriginalDegree;
        }
        
        var rotate = 'rotate(' +rotateOriginalDegree + 'deg)';
		var rotateInfo = 'rotate(' +(-1)*rotateOriginalDegree + 'deg)';

		$('#focus_marker').css({'-moz-transform': rotate, 'transform' : rotate, '-webkit-transform': rotate, '-ms-transform': rotate});
		$("#focus_marker_info").css({'-moz-transform': rotateInfo, 'transform' : rotateInfo, '-webkit-transform': rotateInfo, '-ms-transform': rotateInfo});
		     
         currentFocuserPosition = initFocuserPosition + parseInt(rotateDegree*((finalFocuserPosition - initFocuserPosition) / 180));
         $('#focus_marker_info').text(currentFocuserPosition);    
        
    });
		
    $(window).mouseup(function(event){ 

    	if (dragged){
    		
    		$(window).unbind('mousemove');
    		console.log("Moving focuser:"+$("#focus_marker_info").text());
  
			/*
    		GlAPI.setParameterTreeValue(<%= reservationId %>,'focuser','position',currentFocuserPosition,function(success){

 			}, function(error){

 			});
			*/
    		$('#focus_marker').css("opacity","1.0");		
    		dragged = false;
    	}
    	
    });
		
    
});   

$("#coords_ra").keyup('keyup', function(e){
	var text = $(this).val();
	if(text==""){
		if($("#coords_dec").val()==""){
			$("#tags").removeAttr("disabled");
		}
	} else {
		if($("#tags").val()==""){
			$("#tags").attr("disabled",true);	
		}
	}

});
$("#coords_dec").bind('keyup', function(e){
	if($(this).val()==""){
		if($("#coords_ra").val()==""){
			$("#tags").removeAttr("disabled");
		}
	} else {
		if($("#tags").val()==""){
			$("#tags").attr("disabled",true);	
		}
	}
});
$("#tags").bind('keyup', function(e){
	if($(this).val()==""){
		$("#coords_ra").removeAttr("disabled");
		$("#coords_dec").removeAttr("disabled");
	} else {
		if ($("#coords_ra").val()=="" && $("#coords_dec").val()==""){
			$("#coords_ra").attr("disabled",true);
			$("#coords_dec").attr("disabled",true);		
		}
	}
});
$("#coords_dec").tooltip({
	show: {
		 effect: "slideDown",
	     delay: 250
	}
})
$("#ccd_alert").tooltip({
	show: {
		 effect: "slideDown",
	     delay: 250
	}
});
</script>